node {  
    stage('Delete index') {
        sh 'curl -XDELETE http://${ELASTIC_TARGET}/${ELASTIC_INDEX_NAME}'
    }
    stage('Create index') {
        sh 'curl -XPUT http://${ELASTIC_TARGET}/${ELASTIC_INDEX_NAME}'
        sh 'curl -XPUT http://${ELASTIC_TARGET}/${ELASTIC_INDEX_NAME}/_mapping/club -d \'{ "club": { "properties": { "id": { "type": "string" }, "actif": { "type": "boolean" }, "adresse1Corresp": { "type": "string" }, "adresse2Corresp": { "type": "string" }, "civiliteCorresp": { "properties": { "code": { "type": "string" }, "libelle": { "type": "string" }, "sexe": { "type": "string" }, "valide": { "type": "boolean" } } }, "clubOuSection": { "type": "string" }, "code": { "type": "string" }, "codeComite": { "type": "string" }, "codeLigue": { "type": "string" }, "codePostalCorresp": { "type": "string" }, "codeSecteurActivite": { "type": "string" }, "courriel": { "type": "string" }, "courrielCorresp": { "type": "string" }, "ecoles": { "properties": { "dateFermeture": { "type": "date", "format": "dateOptionalTime" }, "dateOuverture": { "type": "date", "format": "dateOptionalTime" }, "typeEcole": { "properties": { "code": { "type": "string" }, "libelle": { "type": "string" }, "valide": { "type": "boolean" } } } } }, "effectifs": { "properties": { "adulte": { "type": "long" }, "jeune": { "type": "long" }, "millesime": { "type": "long" }, "total": { "type": "long" } } }, "enseignants": { "properties": { "civilite": { "properties": { "code": { "type": "string" }, "libelle": { "type": "string" }, "sexe": { "type": "string" }, "valide": { "type": "boolean" } } }, "id": { "type": "long" }, "meilleurDiplome": { "properties": { "be": { "type": "boolean" }, "code": { "type": "string" }, "libelle": { "type": "string" }, "niveau1": { "type": "long" }, "niveau2": { "type": "long" }, "reconnuEtat": { "type": "boolean" }, "valide": { "type": "boolean" } } }, "nom": { "type": "string" }, "prenom": { "type": "string" } } }, "equipes": { "properties": { "categorieAge": { "properties": { "ageJoueurMax": { "type": "long" }, "ageJoueurMin": { "type": "long" }, "ageMax": { "type": "long" }, "ageMin": { "type": "long" }, "ageReel": { "type": "boolean" }, "ageReelPossible": { "type": "boolean" }, "homologable": { "type": "boolean" }, "id": { "type": "long" }, "libelle": { "type": "string" }, "valide": { "type": "boolean" } } }, "division": { "type": "string" }, "idCompetition": { "type": "long" }, "libelle": { "type": "string" }, "millesime": { "type": "long" }, "niveauHierarchique": { "type": "string" }, "nombre": { "type": "long" }, "sexe": { "type": "string" } } }, "existenceJuridique": { "type": "boolean" }, "feteTennis": { "type": "boolean" }, "fetesDuTennis": { "properties": { "animationBeach": { "type": "boolean" }, "animationPadel": { "type": "boolean" }, "animationTennis": { "type": "boolean" }, "diffusionTele": { "type": "boolean" }, "lots": { "type": "boolean" }, "matchExhibition": { "type": "boolean" }, "momentConvivialite": { "type": "boolean" }, "pretRaquette": { "type": "boolean" }, "ateliersLudiques": { "type": "boolean" }, "contact": { "type": "string" }, "dates": { "type": "string" }, "email": { "type": "string" }, "telephone": { "type": "string" }, "millesime": { "type": "long" }, "millesimeDernier": { "type": "boolean" } } }, "fonctions": { "properties": { "fonction": { "properties": { "club": { "type": "boolean" }, "code": { "type": "string" }, "comite": { "type": "boolean" }, "echelon": { "type": "long" }, "libelle": { "type": "string" }, "licencie": { "type": "boolean" }, "ligue": { "type": "boolean" }, "qualite": { "properties": { "codeQualite": { "type": "string" }, "libelle": { "type": "string" }, "valide": { "type": "boolean" } } }, "valide": { "type": "boolean" } } }, "idPersonne": { "type": "long" }, "nom": { "type": "string" }, "prenom": { "type": "string" }, "structure": { "properties": { "club": { "type": "boolean" }, "id": { "type": "long" }, "libelle": { "type": "string" }, "valide": { "type": "boolean" } } } } }, "from": { "type": "long" }, "installationPrincipale": { "properties": { "adresse1": { "type": "string" }, "adresse2": { "type": "string" }, "clubHouse": { "type": "boolean" }, "codePostal": { "type": "string" }, "courts": { "properties": { "code": { "type": "string" }, "commentaire": { "type": "string" }, "couvert": { "type": "boolean" }, "couverture": { "properties": { "code": { "type": "string" }, "libelle": { "type": "string" }, "valide": { "type": "boolean" } } }, "dateConstruction": { "type": "date", "format": "dateOptionalTime" }, "eclaire": { "type": "boolean" }, "homologueParLaLigue": { "type": "boolean" }, "id": { "type": "integer" }, "isoleChauffe": { "type": "string" }, "miniTennis": { "type": "boolean" }, "nature": { "properties": { "categorieJeu": { "properties": { "code": { "type": "string" }, "libelle": { "type": "string" }, "valide": { "type": "boolean" } } }, "code": { "type": "string" }, "libelle": { "type": "string" }, "valide": { "type": "boolean" } } }, "numero": { "type": "integer" }, "omnisport": { "type": "boolean" }, "typePratique": { "properties": { "code": { "type": "string" }, "libelle": { "type": "string" }, "valide": { "type": "boolean" } } }, "idPhoto": { "type": "integer" } } }, "autresEquipements": { "properties": { "code": { "type": "string" }, "commentaire": { "type": "string" }, "couvert": { "type": "boolean" }, "dateConstruction": { "type": "date", "format": "dateOptionalTime" }, "id": { "type": "integer" }, "numero": { "type": "integer" }, "typeEquipement": { "properties": { "identifiant": { "type": "integer" }, "libelle": { "type": "string" }, "valide": { "type": "boolean" } } }, "idPhoto": { "type": "integer" } } }, "id": { "type": "long" }, "lat": { "type": "double" }, "lng": { "type": "double" }, "nbCourtExt": { "type": "long" }, "nbCourtInt": { "type": "long" }, "principale": { "type": "boolean" }, "telephone": { "type": "string" }, "ville": { "type": "string" }, "idPhoto": { "type": "integer" }, "douches": { "type": "boolean" }, "televison": { "type": "boolean" }, "wifi": { "type": "boolean" }, "bar": { "type": "boolean" }, "restaurant": { "type": "boolean" }, "parking": { "type": "boolean" }, "pmrAcces": { "type": "boolean" }, "pmrDouches": { "type": "boolean" }, "pmrSanitaires": { "type": "boolean" }, "pmrTerrains": { "type": "boolean" }, "pmrClubHouse": { "type": "boolean" } } }, "installations": { "properties": { "adresse1": { "type": "string" }, "adresse2": { "type": "string" }, "clubHouse": { "type": "boolean" }, "codePostal": { "type": "string" }, "courts": { "properties": { "code": { "type": "string" }, "partageAvec": { "type": "string" }, "commentaire": { "type": "string" }, "couvert": { "type": "boolean" }, "couverture": { "properties": { "code": { "type": "string" }, "libelle": { "type": "string" }, "valide": { "type": "boolean" } } }, "eclaire": { "type": "boolean" }, "homologueParLaLigue": { "type": "boolean" }, "isoleChauffe": { "type": "string" }, "miniTennis": { "type": "boolean" }, "nature": { "properties": { "categorieJeu": { "properties": { "code": { "type": "string" }, "libelle": { "type": "string" }, "valide": { "type": "boolean" } } }, "code": { "type": "string" }, "libelle": { "type": "string" }, "valide": { "type": "boolean" } } }, "numero": { "type": "long" }, "omnisport": { "type": "boolean" }, "typePratique": { "properties": { "code": { "type": "string" }, "libelle": { "type": "string" }, "valide": { "type": "boolean" } } } } }, "autresEquipements": { "properties": { "code": { "type": "string" }, "commentaire": { "type": "string" }, "couvert": { "type": "boolean" }, "dateConstruction": { "type": "date", "format": "dateOptionalTime" }, "id": { "type": "integer" }, "numero": { "type": "integer" }, "typeEquipement": { "properties": { "identifiant": { "type": "integer" }, "libelle": { "type": "string" }, "valide": { "type": "boolean" } } }, "idPhoto": { "type": "integer" } } }, "id": { "type": "long" }, "lat": { "type": "double" }, "lng": { "type": "double" }, "nbCourtExt": { "type": "long" }, "nbCourtInt": { "type": "long" }, "principale": { "type": "boolean" }, "telephone": { "type": "string" }, "ville": { "type": "string" }, "idPhoto": { "type": "integer" }, "douches": { "type": "boolean" }, "televison": { "type": "boolean" }, "wifi": { "type": "boolean" }, "bar": { "type": "boolean" }, "restaurant": { "type": "boolean" }, "parking": { "type": "boolean" }, "pmrAcces": { "type": "boolean" }, "pmrDouches": { "type": "boolean" }, "pmrSanitaires": { "type": "boolean" }, "pmrTerrains": { "type": "boolean" }, "pmrClubHouse": { "type": "boolean" } } }, "lat": { "type": "double" }, "lng": { "type": "double" }, "location": { "type": "geo_point", "lat_lon": true }, "nom": { "type": "string", "index" : "not_analyzed", "fields" : { "search" : { "type" : "string", "analyzer" : "standard", "search_analyzer" : "whitespace" } } }, "nomAbrege": { "type": "string" }, "nomComite": { "type": "string" }, "nomCorresp": { "type": "string" }, "nomLigue": { "type": "string" }, "prenomCorresp": { "type": "string" }, "president": { "properties": { "civilite": { "properties": { "code": { "type": "string" }, "libelle": { "type": "string" }, "sexe": { "type": "string" }, "valide": { "type": "boolean" } } }, "nom": { "type": "string" }, "prenom": { "type": "string" } } }, "query": { "properties": { "bool": { "type": "object" } } }, "siteWeb": { "type": "string" }, "size": { "type": "long" }, "stats": { "properties": { "niveauxEquipes": { "type": "string" }, "nombreTerrains": { "type": "long" }, "presenceBe": { "type": "boolean" }, "terrainCouvert": { "type": "boolean" }, "typesEcole": { "type": "string" }, "typesNatureTerrain": { "type": "string" }, "typesPratique": { "type": "string" } } }, "telBureauCorresp": { "type": "string" }, "telDomicileCorresp": { "type": "string" }, "telPortableCorresp": { "type": "string" }, "tennisEntreprise": { "type": "boolean" }, "villeCorresp": { "type": "string" }, "facebook": { "type": "string" }, "instagram": { "type": "string" }, "evaluationNiveauJeu": { "type": "boolean" }, "recherchePartenaire": { "type": "boolean" }, "feteClub": { "type": "boolean" }, "feteEcole": { "type": "boolean" }, "soirees": { "type": "boolean" }, "competitionsLoisir": { "type": "boolean" }, "serviceCordage": { "type": "boolean" }, "venteMateriel": { "type": "boolean" }, "proShop": { "type": "boolean" }, "materielGalaxie": { "type": "boolean" }, "materielPrepaPhysique": { "type": "boolean" }, "pretMateriel": { "type": "boolean" } } } }\''
    }
}
